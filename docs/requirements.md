# 棋类对战平台 第一阶段需求说明

## 范围与目标
- 支持围棋与五子棋的双人对战（黑/白轮流）。
- 支持命令行交互为主，可选实现 GUI（加分项）。
- 满足项目第一阶段全部必选需求，并将可选 GUI 功能并入目标。

## 规则与流程
- 棋盘尺寸：允许 8–19；默认五子棋 15×15，围棋 19×19。
- 开局/重开：在未开始或结束时可 `start`（选择游戏与尺寸）；对局中可 `restart`。
- 回合：黑白交替；围棋允许虚着（pass）；五子棋不允许 pass。
- 终局判定：
  - 五子棋：一方连五即胜；棋盘占满且无人连五为平局。
  - 围棋：采用数子法；双方连续虚着或无子可下时计算目数决胜。
  - 认输：任一方 `resign` 立即结束。
- 围棋提子与合法性：落子需有气或能提子；可提无气的对方棋链；暂不考虑自杀禁手以外的复杂禁入点；遵循正常围棋规则但可简化劫判断（后续实现时说明假设）。
- 悔棋：无限次，每次只退一步（撤销上一手，恢复行棋方与局面）。

## 功能需求
- 交互命令（建议）：
  - `start go|gomoku [size]`：开始指定游戏与尺寸；默认 go=19，gomoku=15。
  - `play x y`：在坐标落子。
  - `pass`：围棋虚着。
  - `undo`：悔棋一步。
  - `resign`：认输。
  - `restart`：重新开始当前游戏（可重新设定尺寸）。
  - `save <file>` / `load <file>`：保存/读取局面。
  - `hint on|off`：显示/隐藏操作提示。
- 显示：命令行展示棋盘、行棋方、提示信息；所有指令需反馈成功/失败原因。
- 存档：可将当前局面保存到指定文件，再从文件读取覆盖当前局面；保存内容应包含棋盘状态、行棋方、历史（用于继续悔棋）。
- GUI 可选：图形化棋盘与棋子，鼠标交互；显示逻辑与业务逻辑分离。

## 非功能/设计约束
- 后端（状态、规则判定、存档）与客户端（输入解析、输出显示）分离；客户端对不同游戏应以同一形式交互。
- 尽量减少对象创建与销毁；避免使用全局变量。
- 异常处理：需对非法输入与异常操作给出明确提示，包括但不限于：
  - 无棋可悔或超过悔棋限制（若后续设定）。
  - 落子非法（越界、占用、不合法围棋位置）。
  - 保存失败或存档内容不合法。
  - 棋盘尺寸不在 8–19。
  - 不合法指令。
- 设计模式体现（候选）：工厂/抽象工厂（创建游戏对象族）、策略（规则/胜负判定）、模板方法（对局流程骨架）、备忘录（悔棋与存档）、状态（未开始/进行中/结束，可选）、观察者（界面刷新，可选）。

## 交付物
- 设计文档：包含设计思路、设计模式选用、关键类与函数说明（含 OOP 原则体现）、UML 图、测试输入/输出、代码仓库与演示视频链接。
- 代码：可运行的命令行版本（含存档/读档、悔棋、认输等），如有 GUI 版本需与业务解耦。
- 演示视频：≤5 分钟，展示主要功能点。

## 假设与说明
- 劫判定等复杂围棋规则若简化，将在实现文档中说明；目前按一般数子规则处理。
- 存档格式可自定义（如文本/JSON），需在设计文档中明确并保持读写一致性。
